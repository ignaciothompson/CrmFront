<div class="subheader">
  <div class="row">
    <div class="col-xs-12 col-sm-6 col-md-3">
      <label for="desde" class="c-label">Desde</label>
      <div class="input-group input-range">
        <input type="date" class="form-control c-input">
        <input type="date" class="form-control c-input">
      </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-2">
      <label for="localidad" class="c-label">Ciudad</label>
      <select id="localidad" class="form-control c-input" [(ngModel)]="localidad">
        <option value="">Todas</option>
        <option value="norte">Montevideo</option>
        <option value="sur">Canelones</option>
        <option value="este">Maldonado</option>
      </select>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-2">
      <label for="proyecto" class="c-label">Barrio</label>
      <select id="proyecto" class="form-control c-input" [disabled]="localidad == ''" [(ngModel)]="selectedBarrio">
        <option value="">Todos</option>
        @for (b of barrios; track b) {
          <option [value]="b">{{ b }}</option>
        }
      </select>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-2">
      <label for="tamano" class="c-label">Tama침o</label>
      <select id="tamano" class="form-control c-input">
        <option value="">Todos</option>
        <option value="pequeno">Peque침o</option>
        <option value="mediano">Mediano</option>
        <option value="grande">Grande</option>
      </select>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-2">
      <label for="precio-min" class="c-label">Precio</label>
      <div class="input-group input-range">
        <input type="number" id="precio-min" class="form-control c-input" placeholder="Min">
        <input type="number" id="precio-max" class="form-control c-input" placeholder="Max">
      </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-2">
      <label for="mostrar-vendidas" class="c-label">Estado</label>
      <div class="form-check m-t-sm">
        <input type="checkbox" id="mostrar-vendidas" class="form-check-input" [(ngModel)]="mostrarVendidas" (ngModelChange)="applyFilters()">
        <label class="form-check-label" for="mostrar-vendidas">Mostrar vendidas/rentadas</label>
      </div>
    </div>
  </div>
  <button class="btn c-btn btn-white btn-square" (click)="resetFilters()"><i class="fa fa-refresh"></i></button>
  <button class="btn c-btn btn-primary" (click)="applyFilters()">Aplicar</button>
</div>

<div class="frame m-b-md">
  <div class="frame-title">
    <h4>Proyectos</h4>
  </div>
  <div class="frame-body scroll-table">
    <table class="table c-table table-striped">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Desarrollador</th>
          <th>Localidad</th>
          <th>Barrio</th>
          <th>Direcci칩n</th>
          <th>Fecha entrega</th>
          <th>Unidades</th>
          <th style="width:140px;"></th>
        </tr>
      </thead>
      <tbody>
        @for (p of proyectos; track p) {
          <tr>
            <td>{{ p.nombre }}</td>
            <td>{{ p.desarrollador }}</td>
            <td>{{ labelForCity(p.ciudad || p.localidad) }}</td>
            <td>{{ p.barrio }}</td>
            <td>{{ p.direccion }}</td>
            <td>{{ p.entrega }}</td>
            <td class="text-end">{{ p.unidadesCount || 0 }}</td>
            <td class="text-end">
              <a href="javascript:;" class="btn-table" (click)="goEditarProyecto(p)" aria-label="Editar Proyecto"><i class="fas fa-pen"></i></a>
              <a href="javascript:;" class="btn-table" (click)="shareProyecto(p)" aria-label="Compartir"><i class="fa fa-external-link"></i></a>
              <a href="javascript:;" class="btn-table eliminar" (click)="confirmDeleteProyecto(p)" aria-label="Eliminar Proyecto"><i class="fa fa-trash"></i></a>
            </td>
          </tr>
        }
        @if (!proyectos.length) {
          <tr>
            <td colspan="7" class="text-center">Sin proyectos</td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

<div class="frame">
  <div class="frame-title">
    <h4>Unidades (25)</h4>
    <div class="frame-actions">
      <button (click)="goNuevo()" class="btn c-btn btn-primary pull-end">Nuevo</button>
    </div>
  </div>
  <div class="frame-body scroll-table">
    <table class="table c-table table-fixed table-striped">
      <thead>
        <tr>
          <th>Proyecto</th>
          <th>Localidad</th>
          <th>Tama침o</th>
          <th>Precio</th>
          <th>Fecha entrega</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        @for (it of filteredUnidades; track it) {
          <tr>
            <td>{{ it.nombre || it.name }}</td>
            <td>{{ labelForCity(it.city || it.localidad) }}</td>
            <td>{{ it.tamano || it.size }}</td>
            <td>{{ it.precio | currency:'USD':'symbol':'1.0-0' }}</td>
            <td>{{ it.entrega || it.fechaEntrega }}</td>
            <td class="text-end">
              <a href="javascript:;" (click)="goEditar(it.id)" class="btn-table" aria-label="Editar"><i class="fas fa-pen"></i></a>
              <a href="javascript:;" class="btn-table" aria-label="Visitar"><i class="fa fa-external-link"></i></a>
              <a href="javascript:;" (click)="eliminar(it.id)" class="btn-table eliminar" aria-label="Eliminar"><i class="fa fa-trash"></i></a>
            </td>
          </tr>
        }
        @if (!filteredUnidades.length) {
          <tr>
            <td colspan="6" class="text-center">Sin resultados</td>
          </tr>
        }
      </tbody>
    </table>
  </div>
  <div class="frame-footer">

  </div>
</div>

