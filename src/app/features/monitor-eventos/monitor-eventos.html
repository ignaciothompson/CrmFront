<app-subheader 
  [filters]="subheaderFilters"
  [initialValues]="initialFilterValues"
  (submit)="onFilterSubmit($event)"
  [submitLabel]="'Aplicar'">
</app-subheader>

<div class="cards-container-3 m-b-sm">
  <div class="card">
    <div class="card-icon"><i></i></div>
    <div class="card-data">
      <div class="card-title">Total de eventos</div>
      <div class="card-value">{{ stats.total }}</div>
    </div>
  </div>
  <div class="card">
    <div class="card-icon"><i></i></div>
    <div class="card-data">
      <div class="card-title">Eventos creados</div>
      <div class="card-value">{{ stats.creados }}</div>
    </div>
  </div>
  <div class="card">
    <div class="card-icon"><i></i></div>
    <div class="card-data">
      <div class="card-title">Eventos editados</div>
      <div class="card-value">{{ stats.editados }}</div>
    </div>
  </div>
</div>

<div class="frame">
  <div class="frame-body">
    <!-- Desktop Table View -->
    <div class="d-none d-md-block scroll-table">
      <table class="table c-table table-striped table-fixed">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Categoría</th>
            <th>Tipo</th>
            <th>Usuario</th>
            <th>Detalle</th>
          </tr>
        </thead>
        <tbody>
          @for (ev of items; track ev) {
            <tr>
              <td>{{ ev?.fecha | date:'yyyy-MM-dd HH:mm' }}</td>
              <td>{{ ev?.categoria }}</td>
              <td>{{ ev?.tipo }}</td>
              <td>{{ ev?.usuario || '-' }}</td>
              <td>{{ ev?._detalleStr }}</td>
            </tr>
          }
          @if (!items.length) {
            <tr>
              <td colspan="5" class="text-center">Sin resultados</td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    <!-- Mobile Card View -->
    <div class="clickable-cards-container d-md-none">
      @for (ev of items; track ev) {
        <div class="clickable-card">
          <div class="clickable-card-header">
            <div class="clickable-card-date">
              <i class="fa fa-calendar"></i>
              <span>{{ ev?.fecha | date:'yyyy-MM-dd HH:mm' }}</span>
            </div>
            <div class="clickable-card-badge" [ngClass]="getTipoBadgeClass(ev?.tipo)">
              {{ ev?.tipo }}
            </div>
          </div>
          <div class="clickable-card-body">
            <div class="clickable-card-row">
              <div class="clickable-card-label">
                <i class="fa fa-tag"></i>
                <span>Categoría</span>
              </div>
              <div class="clickable-card-value">{{ ev?.categoria || '-' }}</div>
            </div>
            <div class="clickable-card-row">
              <div class="clickable-card-label">
                <i class="fa fa-user"></i>
                <span>Usuario</span>
              </div>
              <div class="clickable-card-value">{{ ev?.usuario || '-' }}</div>
            </div>
            @if (ev?._detalleStr) {
              <div class="clickable-card-row">
                <div class="clickable-card-label">
                  <i class="fa fa-info-circle"></i>
                  <span>Detalle</span>
                </div>
                <div class="clickable-card-value">{{ ev._detalleStr }}</div>
              </div>
            }
          </div>
        </div>
      }
      @if (!items.length) {
        <div class="clickable-card-empty">
          <i class="fa fa-list"></i>
          <p>Sin resultados</p>
        </div>
      }
    </div>
  </div>
</div>


