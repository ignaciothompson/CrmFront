@if (type === 'range') {
  <div class="filter-wrapper">
    @if (label) {
      <label [for]="id + '-from'" class="c-label">
        {{ label }}
        @if (required) {
          <span class="text-danger">*</span>
        }
      </label>
    }
    <div class="input-group input-range">
      <div class="range-item">
        <input
          [id]="id + '-from'"
          [type]="inputType"
          class="form-control c-input"
          [placeholder]="placeholder || 'Desde'"
          [ngModel]="rangeFrom"
          (ngModelChange)="onRangeFromChange($event)"
          (blur)="onRangeFromBlur()"
          [disabled]="disabled"
          [required]="required"
          [min]="minDate ? minDate : min"
          [max]="maxDate ? maxDate : max"
          [step]="step"
        />
      </div>
      <div class="range-item">
        <input
          [id]="id + '-to'"
          [type]="inputType"
          class="form-control c-input"
          placeholder="Hasta"
          [ngModel]="rangeTo"
          (ngModelChange)="onRangeToChange($event)"
          (blur)="onRangeToBlur()"
          [disabled]="disabled"
          [required]="required"
          [min]="minDate ? minDate : min"
          [max]="maxDate ? maxDate : max"
          [step]="step"
        />
      </div>
    </div>
  </div>
} @else if (type === 'multiselect') {
  <div class="filter-wrapper">
    @if (label) {
      <label class="c-label">
        {{ label }}
        @if (required) {
          <span class="text-danger">*</span>
        }
      </label>
    }
    <div class="multiselect-wrapper">
      @for (option of values; track option.value) {
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            [id]="id + '-' + option.value"
            [checked]="isSelected(option.value)"
            (change)="onMultiselectChange(option, $event)"
            [disabled]="disabled"
          />
          <label class="form-check-label" [for]="id + '-' + option.value">
            {{ option.label }}
          </label>
        </div>
      }
    </div>
  </div>
} @else if (type === 'select') {
  <div class="filter-wrapper">
    @if (label) {
      <label [for]="id" class="c-label">
        {{ label }}
        @if (required) {
          <span class="text-danger">*</span>
        }
      </label>
    }
    @if (multiple) {
      <!-- Custom multiple select with checkboxes -->
      <div class="custom-multiselect-wrapper" [attr.data-multiselect-id]="id">
        <div 
          class="custom-multiselect-display form-control c-input"
          [class.disabled]="disabled"
          (click)="toggleMultiselectDropdown()"
          [attr.aria-expanded]="multiselectOpen"
          [attr.aria-haspopup]="true"
        >
          <span class="multiselect-selected-text">
            @if (selectedValues.length === 0) {
              <span class="placeholder">{{ placeholder || 'Ninguno' }}</span>
            } @else {
              <span>{{ getSelectedLabels() }}</span>
            }
          </span>
          <i class="fa fa-chevron-down multiselect-arrow" [class.open]="multiselectOpen"></i>
        </div>
        @if (multiselectOpen) {
          <div class="custom-multiselect-dropdown">
            @for (option of values; track option.value) {
              <div 
                class="multiselect-option"
                [class.selected]="isSelected(option.value)"
                (click)="toggleOption(option.value, $event)"
              >
                <input
                  type="checkbox"
                  [id]="id + '-' + option.value"
                  [checked]="isSelected(option.value)"
                  [disabled]="disabled"
                  class="multiselect-checkbox-hidden"
                  tabindex="-1"
                  aria-hidden="true"
                />
                <span class="multiselect-option-label">
                  {{ option.label }}
                </span>
                @if (isSelected(option.value)) {
                  <i class="fa fa-check-circle multiselect-check-icon"></i>
                }
              </div>
            }
          </div>
        }
      </div>
    } @else {
      <!-- Single select -->
      <select
        [id]="id"
        class="form-control c-input"
        [ngModel]="value"
        (ngModelChange)="onInputChange($event)"
        [disabled]="disabled"
        [required]="required"
      >
        @if (!required) {
          <option [value]="null">{{ placeholder || 'Seleccionar...' }}</option>
        }
        @for (option of values; track option.value) {
          <option [value]="option.value">{{ option.label }}</option>
        }
      </select>
    }
  </div>
} @else if (type === 'typeahead') {
  <div class="filter-wrapper">
    @if (label) {
      <label [for]="id" class="c-label">
        {{ label }}
        @if (required) {
          <span class="text-danger">*</span>
        }
      </label>
    }
    <typeahead
      [items]="items"
      [idKey]="idKey"
      [labelKey]="labelKey"
      [placeholder]="placeholder || 'Buscar...'"
      [disabled]="disabled"
      [ngModel]="value"
      (ngModelChange)="onTypeaheadChange($event)"
    ></typeahead>
  </div>
} @else if (type === 'radio') {
  <div class="filter-wrapper">
    <div class="radio-wrapper">
      @for (option of values; track option.value) {
        <div class="form-check">
          <input
            class="form-check-input"
            type="radio"
            [name]="id"
            [id]="id + '-' + option.value"
            [value]="option.value"
            [checked]="value === option.value"
            (change)="onRadioChange(option.value)"
            [disabled]="disabled"
          />
          <label class="form-check-label" [for]="id + '-' + option.value">
            {{ option.label }}
            @if (required && $first) {
              <span class="text-danger">*</span>
            }
          </label>
        </div>
      }
    </div>
  </div>
} @else if (type === 'checkbox') {
  @if (values.length > 0) {
    <!-- Multiple checkboxes (checkbox group) -->
    <div class="filter-wrapper">
      <div class="checkbox-wrapper">
        @for (option of values; track option.value) {
          <div class="form-check" style="padding-left: 0px; margin: 0px;">
            <input
              class="form-check-input"
              type="checkbox"
              [id]="id + '-' + option.value"
              [checked]="isCheckboxGroupSelected(option.value)"
              (change)="onCheckboxGroupChange(option, $event)"
              [disabled]="disabled"
            />
            <label class="form-check-label" [for]="id + '-' + option.value">
              {{ option.label }}
              @if (required && $first) {
                <span class="text-danger">*</span>
              }
            </label>
          </div>
        }
      </div>
    </div>
  } @else {
    <!-- Single checkbox (boolean) -->
    <div class="filter-wrapper">
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          [id]="id"
          [checked]="value === true || value === 'true' || value === 1"
          (change)="onCheckboxChange($event)"
          [disabled]="disabled"
        />
        <label class="form-check-label" [for]="id">
          {{ label || placeholder }}
        </label>
      </div>
    </div>
  }
} @else {
  <div class="filter-wrapper">
    @if (label) {
      <label [for]="id" class="c-label">
        {{ label }}
        @if (required) {
          <span class="text-danger">*</span>
        }
      </label>
    }
    <input
      [id]="id"
      [type]="inputType"
      class="form-control c-input"
      [placeholder]="placeholder"
      [ngModel]="value"
      (ngModelChange)="onInputChange($event)"
      (blur)="onInputBlur()"
      [disabled]="disabled"
      [required]="required"
      [min]="type === 'date' ? minDate : min"
      [max]="type === 'date' ? maxDate : max"
      [step]="step"
    />
  </div>
}

